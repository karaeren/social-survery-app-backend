var y=Object.defineProperty;var c=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var _=(o,e,t)=>e in o?y(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,d=(o,e)=>{for(var t in e||(e={}))V.call(e,t)&&_(o,t,e[t]);if(c)for(var t of c(e))b.call(e,t)&&_(o,t,e[t]);return o};import{_ as S,u as k}from"./index.55af4f08.js";import{m as E,E as m,r as a,o as B,c as T,a as s,w as n,f as p}from"./vendor.8855210f.js";const U={data(){return{user:"",password:""}},computed:d({},E(k)),methods:{async onSubmit(){let o;try{o=(await this.axios.post("https://socialsurveyapp.software/api/v1/auth/login",{email:this.user,password:this.password})).data}catch(e){let t="Unknown error...";e.response.data&&e.response.data.message&&(t=e.response.data.message),m.alert(t,"Error",{confirmButtonText:"OK"});return}o&&o.user&&o.user.role==="admin"?(this.accountStore.setTokens(o.tokens),this.accountStore.setUser(o.user),this.$router.push("/")):m.alert("User does not have required privileges!","Error",{confirmButtonText:"OK"})}}},C={class:"common-layout"},L=p("Social Survey App"),A=p("Login");function K(o,e,t,N,r,O){const f=a("el-header"),u=a("el-input"),l=a("el-form-item"),h=a("el-button"),w=a("el-form"),x=a("el-card"),g=a("el-main"),v=a("el-container");return B(),T("div",C,[s(v,null,{default:n(()=>[s(f,null,{default:n(()=>[L]),_:1}),s(g,{class:"login-main"},{default:n(()=>[s(x,{class:"box-card"},{default:n(()=>[s(w,{class:"demo-form-inline","label-width":"80px"},{default:n(()=>[s(l,{label:"E-mail"},{default:n(()=>[s(u,{modelValue:r.user,"onUpdate:modelValue":e[0]||(e[0]=i=>r.user=i)},null,8,["modelValue"])]),_:1}),s(l,{label:"Password"},{default:n(()=>[s(u,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=i=>r.password=i),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),s(l,{style:{"margin-bottom":"0"}},{default:n(()=>[s(h,{type:"primary",onClick:this.onSubmit},{default:n(()=>[A]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}var $=S(U,[["render",K]]);export{$ as default};

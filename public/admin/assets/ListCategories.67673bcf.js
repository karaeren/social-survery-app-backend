import{r as k,N,O as A,v as K,x as p,P as L,I as O,K as z,Q as F,J as M,L as S,U as $,o as H,c as R,i as C,e as t,u as r,w as n,V as j,j as f,X as w}from"./vendor.0d9fb7aa.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css               */import{u as J}from"./index.a0b1e89c.js";import{u as P}from"./survey.d476d253.js";const Q={class:"main centered-main"},W=f(" Edit "),X=f(" Delete "),Y={class:"dialog-footer"},q=f("Cancel"),G=f(" Update "),se={setup(Z){const d=J(),{getCategories:h,updateCategory:v,deleteCategory:V}=P(),_=k([]),x=N(()=>_.value.filter(a=>!u.value||a.name.toLowerCase().includes(u.value.toLowerCase()))),u=k(""),s=k(!1),o=A({id:"",rank:"",name:"",description:"",category:""});K(async()=>{!d.access.token||await g()});async function g(){try{_.value=await h(d.access.token)}catch(a){return console.error(a),p.alert("An unknown error happened while trying to retrieve categories...","Error",{confirmButtonText:"OK"})}}function b(a){for(const e of _.value)if(e.id===a){o.id=a,o.rank=e.rank,o.name=e.name,o.color=e.color,o.rank=e.rank,s.value=!0;return}}async function E(){try{await v(d.access.token,o.id,o.name,o.color,o.rank),w({type:"success",message:"Category updated"}),await g(),s.value=!1}catch(a){console.error(a);let e="Couldn't update category, an unknown error happened...";return a.response&&a.response.data.message&&(e=a.response.data.message),p.alert(e,"Error",{confirmButtonText:"OK"})}}function B(a){p.confirm("Are you sure you want to delete this category? This is irreversible!","Warning",{confirmButtonText:"Yes",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{try{await V(d.access.token,a),w({type:"success",message:"Delete completed"}),await g()}catch(e){return console.error(e),p.alert("Couldn't delete category, an unknown error happened...","Error",{confirmButtonText:"OK"})}}).catch(()=>{w({type:"info",message:"Delete canceled"})})}return(a,e)=>{const i=L,c=O,m=z,T=F,y=M,D=S,U=$;return H(),R(j,null,[C("div",Q,[t(T,{data:r(x),"default-sort":{prop:"rank"},height:"100vh",style:{width:"100%"}},{default:n(()=>[t(i,{fixed:"",prop:"rank",label:"Rank",sortable:"",width:"90"}),t(i,{prop:"name",label:"name",width:"360"}),t(i,{prop:"color",label:"Color Hex",width:"120"}),t(i,{prop:"id",label:"ID",sortable:"",width:"360"}),t(i,{fixed:"right",align:"right","min-width":"240"},{header:n(()=>[t(c,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),size:"small",placeholder:"Type to search"},null,8,["modelValue"])]),default:n(l=>[t(m,{type:"primary",size:"small",onClick:I=>b(l.row.id)},{default:n(()=>[W]),_:2},1032,["onClick"]),t(m,{type:"danger",size:"small",onClick:I=>B(l.row.id)},{default:n(()=>[X]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(U,{modelValue:s.value,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value=l),title:"Update Category"},{footer:n(()=>[C("span",Y,[t(m,{onClick:e[4]||(e[4]=l=>s.value=!1)},{default:n(()=>[q]),_:1}),t(m,{type:"primary",onClick:E},{default:n(()=>[G]),_:1})])]),default:n(()=>[t(D,{model:r(o)},{default:n(()=>[t(y,{label:"Name","label-width":"140px"},{default:n(()=>[t(c,{modelValue:r(o).name,"onUpdate:modelValue":e[1]||(e[1]=l=>r(o).name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(y,{label:"Color Hex","label-width":"140px"},{default:n(()=>[t(c,{modelValue:r(o).color,"onUpdate:modelValue":e[2]||(e[2]=l=>r(o).color=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(y,{label:"Rank","label-width":"140px"},{default:n(()=>[t(c,{modelValue:r(o).rank,"onUpdate:modelValue":e[3]||(e[3]=l=>r(o).rank=l),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}};export{se as default};

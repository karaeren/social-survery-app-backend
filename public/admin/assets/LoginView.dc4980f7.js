import{r as d,u as V,q as h,s as b,t as B,v as k,x as A,y as C,z as F,A as S,c as T,e as U,f as e,w as o,p as i,E as m}from"./vendor.8979cdfa.js";import{u as I,a as M}from"./index.6568d9db.js";const q={class:"common-layout"},H=i("Social Survey App"),K=i("Login"),z={setup(L){const _=I(),{login:p}=M(),n=d(""),s=d(""),v=V();async function f(){let a;try{a=await p(n.value,s.value)}catch(t){let l="Unknown error...";t.response.data&&t.response.data.message&&(l=t.response.data.message),m.alert(l,"Error",{confirmButtonText:"OK"});return}a&&a.user&&a.user.role==="admin"?(_.setTokens(a.tokens),_.setUser(a.user),v.push("/")):m.alert("User does not have required privileges!","Error",{confirmButtonText:"OK"})}return(a,t)=>{const l=h,c=b,r=B,E=k,x=A,w=C,y=F,g=S;return T(),U("div",q,[e(g,null,{default:o(()=>[e(l,null,{default:o(()=>[H]),_:1}),e(y,{class:"login-main"},{default:o(()=>[e(w,{class:"box-card"},{default:o(()=>[e(x,{class:"demo-form-inline","label-width":"80px"},{default:o(()=>[e(r,{label:"E-mail"},{default:o(()=>[e(c,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=u=>n.value=u)},null,8,["modelValue"])]),_:1}),e(r,{label:"Password"},{default:o(()=>[e(c,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=u=>s.value=u),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),e(r,{style:{"margin-bottom":"0"}},{default:o(()=>[e(E,{type:"primary",onClick:f},{default:o(()=>[K]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}};export{z as default};
